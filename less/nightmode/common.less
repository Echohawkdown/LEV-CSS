@header-spacing: -34px;

.res-nightmode, html:lang(dd) {
  // Changes background color for everything
  body, .side, .flairselector, .linefield, 
  .icon-menu a, .side .leavemoderator, .side .leavecontributor-button, 
  .side .titlebox, .side .spacer .titlebox .redditname, .side .titlebox .flairtoggle, 
  .side .usertext-body .md ol, .side .usertext-body .md ol ol,
  .side .usertext-body .md ol ol li, .side blockquote, .modactionlisting table * {
    background-color: #080808;
  }
  // Shows/unhides sidebar header nubs
  body > .content { background-color: transparent !important; }
  
  // Visited links color change
  .entry a { color: #007dc3; }
  .entry a:visited[href*="lol.eventvods.com"] { color: #007dc3; }
  .RES-keyNav-activeElement .entry a:visited[href*="lol.eventvods.com"] { color: #8ad!important; }

  // alien
  #header-img-a {
    border-right: 1px solid #080808;
    .bg-pos(0, @header-spacing * 2);
    &:hover { .bg-pos(0, @header-spacing * 3); }
  }

  // Header image

  #header-bottom-left { background: #02021a url(%%header%%) no-repeat right top!important; }

  // Moves userbar down below header image

  #header-bottom-right {
    background: url(%%gray%%);
    .bg-pos(0, @header-spacing * 2);
    a { color: #080808; }
  }

  .user {
    color: #080808;
    .userkarma { border-color: #080808; }
  }

  .separator { color: #ccc; }

  // RES-specific userbar tweaks
  #header-bottom-right.res-navTop {
    top: 145px;
    bottom: @header-spacing;
    line-height: 22px;
    padding-left: 5px;
    background: url(%%gray%%) 0px (@header-spacing * 2);
    border-radius: 0;
    border-left: 1px solid #080808;
    #userbarToggle {
      border-radius: 0;
      background: url(%%gray%%) 0px (@header-spacing * 2);
      border-right: 1px dotted #444;
      border-left: 1px solid #444;
      line-height: 28px;
      color: #080808;
    }
  }

  .link.last-clicked { overflow: hidden; }
  
  // Switches out default thumb for nightmode-friendly version
  .thumbnail { background: url(%%nightmode-sprites%%) 0px 1px no-repeat #080808; }

  // Collapsable in entries
  .entry {
    .tagline:first-of-type, time { color: #b4b47d!important; }
    .md h3 { margin-bottom: 8px; }
  }

  // Red text in posts
  .usertext-body h4 { color: #f23; font-weight: bold; }
  
  // Changes post border color to be visible
  .link .usertext-body .md, .side .linkinfo { border-color: #88f; }
  
  // tables
  .md table {
    * { border: 10px; }
    th { text-align: center; }
    thead { background-color: #333; }
    td, th { border-right: 1px solid #888; padding: 4px 8px; }
  }
  .side .md table { width:100%; }

  .md th { background-color: #101010; border-color: #101010; }
  
  // ALTERNATE ROW COLORS
  .md tr:nth-of-type(odd) { background: #181818; color: #dcdcdc; }
  .md tr:nth-of-type(even) { background: #222; color: #dcdcdc; }

  // ROW HOVER COLOR
  .md table tr:hover { 
    background-color: #7d7; 
    color: #080808;
    a, a[href*="lol.eventvods.com"] { color: #55c!important; }
  }
  
  // Hides video expandos in posts
  .usertext-body .md {
    .RESdupeimg, .expando-button.video, 
    .expando-button.video.collapsed,
    .expando-button.video.expanded {
      display: none!important;
    }
  }

  // Hides downvote arrow on posts only; still accessible on comments
  // Also replaces default RES nightmode arrow sprites
  .arrow, .arrow.up, .arrow.up:hover, .arrow.upmod,
  .arrow.down, .arrow.down:hover, .arrow.downmod { background: url(%%nightmode-sprites%%)!important; }
  
  .arrow.up, .arrow.up:hover { background-position: -30px -52px!important; }
  .arrow.upmod { background-position: -45px -52px!important; }
  .arrow.down { visibility: hidden; display: none; }
  .comment .arrow.down, .comment .arrow.down:hover { visibility: visible; display: block; background-position: 0px -52px!important; margin-top: 5px; }
  .comment .arrow.downmod { background-position: -15px -52px!important; margin-top: 5px; }

  // Change active keynav bg-color
  .RES-keyNav-activeElement {
    &, .usertext-body, .usertext-body .md, .usertext-body .md p,
    .commentarea & .noncollapsed, .noncollapsed .md, .noncollapsed .md p {
      background-color: #3a3a3a !important;
    }
  }
  
  // notice below comments
  .commentarea .usertext .usertext-edit:after { background-color: inherit; color: #ccc; }
  
  // Comments coloring
  .comment { border-radius: 3px; border: none!important; }
  .comments-page .comment,
  .comments-page .comment .comment .comment, 
  .comments-page .comment .comment .comment .comment .comment, 
  .comments-page .comment .comment .comment .comment .comment .comment .comment, 
  .comments-page .comment .comment .comment .comment .comment .comment .comment .comment .comment,
  .res-commentBoxes .comments-page .comment,
  .res-commentBoxes .comments-page .comment .comment .comment, 
  .res-commentBoxes .comments-page .comment .comment .comment .comment .comment, 
  .res-commentBoxes .comments-page .comment .comment .comment .comment .comment .comment .comment, 
  .res-commentBoxes .comments-page .comment .comment .comment .comment .comment .comment .comment .comment .comment {
    background-color: #1a1a1a!important;
    .arrow.up, .arrow.up:hover { background-position: -30px -66px !important; }
    .arrow.upmod { background-position: -45px -66px !important; }
    .arrow.down, .arrow.down:hover { background-position: 0px -66px!important;}
    .arrow.downmod { background-position: -15px -66px!important; }
  }
  .comments-page .comment .comment,
  .comments-page .comment .comment .comment .comment, 
  .comments-page .comment .comment .comment .comment .comment .comment, 
  .comments-page .comment .comment .comment .comment .comment .comment .comment .comment,
  .comments-page .comment .comment .comment .comment .comment .comment .comment .comment .comment .comment,
  .res-commentBoxes .comments-page .comment .comment,
  .res-commentBoxes .comments-page .comment .comment .comment .comment, 
  .res-commentBoxes .comments-page .comment .comment .comment .comment .comment .comment, 
  .res-commentBoxes .comments-page .comment .comment .comment .comment .comment .comment .comment .comment,
  .res-commentBoxes .comments-page .comment .comment .comment .comment .comment .comment .comment .comment .comment .comment {
    margin-right: 0px;
    background-color: #080808!important;
  }

  // Tournament icons in header
  .side {
    // In order, header icons for the following tourneys, left to right
    // IEM, EU LCS, OGN/LCK, LPL, NA LCS
    a[href="/r/LoLeventVoDs/comments/2ywjmx/"],
    a[href="/r/LoLeventVoDs/comments/2x8ymq/"],
    a[href="/r/LoLeventVoDs/comments/2x1sek/"],
    a[href="/r/LoLeventVoDs/comments/2xckeu/"],
    a[href="/r/LoLeventVoDs/comments/2xhgar/"] {
      background: url(%%headers%%) no-repeat top left;
      height: 125px;
      display: block;
      position: absolute;
      top: 19px;
      z-index: 9999;
    }
    // IEM
    a[href="/r/LoLeventVoDs/comments/2ywjmx/"] {
      right: 670px;
      width: 250px;
      .bg-pos;
      &:hover {
        .bg-pos(0, @header-icons-height);
      }
    }
    // EU LCS
    a[href="/r/LoLeventVoDs/comments/2x8ymq/"] {
      right: 520px;
      width: 140px;
      .bg-pos(-250px, 0);
      &:hover {
        .bg-pos(-250px, @header-icons-height);
      }
    }
    // OGN/LCK
    a[href="/r/LoLeventVoDs/comments/2x1sek/"] {
      right: 320px;
      width: 200px;
      .bg-pos(-380px, 0);
      &:hover {
        .bg-pos(-380px, @header-icons-height);
      }
    }
    // LPL
    a[href="/r/LoLeventVoDs/comments/2xckeu/"] {
      right: 175px;
      width: 130px;
      .bg-pos(-580px, 0);
      &:hover {
        .bg-pos(-580px, @header-icons-height);
      }
    }
    // NA LCS
    a[href="/r/LoLeventVoDs/comments/2xhgar/"] {
      right: 0;
      width: 140px;
      .bg-pos(-710px, 0);
      &:hover {
        .bg-pos(-710px, @header-icons-height);
      }
    }
  }
}